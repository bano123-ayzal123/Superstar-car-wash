import{f as c}from"./chunk-ICGTVVQE.js";import{R as a,X as u,m as n,p as i}from"./chunk-HGG7PMT7.js";var f=(()=>{class r{constructor(){this.KEY="sscwauth_v1",this.router=u(c),this._user$=new n(this.read()),this.user$=this._user$.asObservable()}get isLoggedIn(){return!!this._user$.value}login(t,e){let s={id:crypto.randomUUID(),name:t.split("@")[0],email:t};return this.persist(s),i(s)}register(t,e,s){let o={id:crypto.randomUUID(),name:t,email:e};return this.persist(o),i(o)}logout(t="/login"){try{localStorage.removeItem(this.KEY)}catch{}this._user$.next(null),queueMicrotask(()=>this.router.navigateByUrl(t))}persist(t){localStorage.setItem(this.KEY,JSON.stringify(t)),this._user$.next(t)}read(){try{return JSON.parse(localStorage.getItem(this.KEY)||"null")}catch{return null}}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{f as a};
